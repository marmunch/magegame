# Эпичные схватки боевых магов

## Описание

"Эпичные схватки боевых магов" — это веб-приложение, которое реализует популярную настольную игру в цифровом формате. Игроки могут соревноваться друг с другом в реальном времени, используя магические заклинания и стратегии для победы.

## Технологии

- **Веб-сокеты**: Для реализации реального времени взаимодействия между игроками.
- **PHP**: Для серверной логики и управления данными.
- **JavaScript**: Для клиентской логики и взаимодействия с пользователем.

## Подключение веб-сокета

- cd public_html/mages
- php server.php

## Использование

1. Откройте браузер и перейдите по адресу `https://se.ifmo.ru/~s333884/mages/php.php`.
2. Зарегистрируйтесь или войдите в систему.
3. Создайте или присоединитесь к игровой комнате.
4. Начните игру и наслаждайтесь схватками!

## Описание API

Этот API предоставляет эндпоинты для управления многопользовательской карточной игрой. Он включает функции для аутентификации пользователей, управления игровыми комнатами, операций с картами и обновлений.

## Основные эндпоинты

### 1. apply_card_effects.php

- **Путь** `/apply_card_effects.php`
- **Метод:** POST
- **Описание:** Применяет эффекты карты к игрокам в игровой комнате.
- **Входные параметры:**
  - `room_id` (int): Идентификатор игровой комнаты.
  - `card_id` (int): Идентификатор карты.
  - `card_position` (int): Позиция карты.
  - `player_id` (int): Идентификатор игрока.

### 2. **check_invitations.php**
- **Описание**: Проверяет наличие ожидающих приглашений для аутентифицированного пользователя.
- **Путь**: `/check_invitations.php`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 3. **check_phase2.php**
- **Описание**: Проверяет текущую фазу игры в комнате.
- **Путь**: `/check_phase2.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 4. **check_player_in_room.php**
- **Описание**: Проверяет, находится ли игрок в указанной комнате.
- **Путь**: `/check_player_in_room.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 5. **check_spells_empty.php**
- **Описание**: Проверяет, пуста ли таблица заклинаний для указанной комнаты.
- **Путь**: `/check_spells_empty.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 6. **check_winner.php**
- **Описание**: Проверяет наличие победителя в игре.
- **Путь**: `/check_winner.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 7. **create_room.php**
- **Описание**: Создает новую игровую комнату.
- **Путь**: `/create_room.php`
- **Метод**: `POST`
- **Входные параметры**: Нет

### 8. **current_timee.php**
- **Описание**: Обновляет текущее время в игровой комнате.
- **Путь**: `/current_timee.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.
  - `new_time` (int): Новое значение времени.

### 9. **game.html**
- **Описание**: HTML-страница игрового интерфейса.
- **Путь**: `/game.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 10. **get_chosen_cards.php**
- **Описание**: Получает выбранные карты для указанной комнаты.
- **Путь**: `/get_chosen_cards.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 11. **get_current_timee.php**
- **Описание**: Получает текущее время для указанной комнаты.
- **Путь**: `/get_current_timee.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 12. **get_game_info.php**
- **Описание**: Получает информацию о текущей игре в комнате.
- **Путь**: `/get_game_info.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 13. **get_room_info.php**
- **Описание**: Получает информацию о комнате и игроках в ней.
- **Путь**: `/get_room_info.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 14. **get_rooms.php**
- **Описание**: Получает список всех комнат.
- **Путь**: `/get_rooms.php`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 15. **ingame_rules.html**
- **Описание**: HTML-страница с правилами игры.
- **Путь**: `/ingame_rules.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 16. **join_room.php**
- **Описание**: Присоединяет игрока к указанной комнате.
- **Путь**: `/join_room.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 17. **leave_room.php**
- **Описание**: Удаляет игрока из комнаты.
- **Путь**: `/leave_room.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 18. **login.html**
- **Описание**: HTML-страница для входа в систему.
- **Путь**: `/login.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 19. **login.php**
- **Описание**: Обрабатывает вход пользователя в систему.
- **Путь**: `/login.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `login` (string): Логин пользователя.
  - `password` (string): Пароль пользователя.

### 20. **php.php**
- **Описание**: Проверяет аутентификацию пользователя и перенаправляет на главную страницу.
- **Путь**: `/php.php`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 21. **play_cards.php**
- **Описание**: Обрабатывает ход игрока, выбранные карты и обновляет состояние игры.
- **Путь**: `/play_cards.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.
  - `selected_cards` (json): Выбранные карты в формате JSON.

### 22. **reg.html**
- **Описание**: HTML-страница для регистрации нового пользователя.
- **Путь**: `/reg.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 23. **reg.php**
- **Описание**: Обрабатывает регистрацию нового пользователя.
- **Путь**: `/reg.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `login` (string): Логин нового пользователя.
  - `password` (string): Пароль нового пользователя.

### 24. **remove_spells.php**
- **Описание**: Удаляет заклинания для указанного игрока.
- **Путь**: `/remove_spells.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `id_player` (int): Идентификатор игрока.

### 25. **reset_cards_chosen.php**
- **Описание**: Сбрасывает выбор карт для всех игроков в комнате.
- **Путь**: `/reset_cards_chosen.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 26. **room.html**
- **Описание**: HTML-страница для выбора комнаты.
- **Путь**: `/room.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 27. **rules.html**
- **Описание**: HTML-страница с правилами игры.
- **Путь**: `/rules.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 28. **send_invite.php**
- **Описание**: Отправляет приглашение другому игроку.
- **Путь**: `/send_invite.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.
  - `invited_login` (string): Логин приглашенного игрока.

### 29. **server.php**
- **Описание**: WebSocket-сервер для обновлений в реальном времени.
- **Путь**: `/server.php`
- **Метод**: `WebSocket`
- **Входные параметры**: Нет

### 30. **update_cards_chosen_status.php**
- **Описание**: Сбрасывает статус выбора карт для всех игроков в комнате.
- **Путь**: `/update_cards_chosen_status.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 31. **update_cards_in_hand.php**
- **Описание**: Обновляет карты в руке у игроков в комнате.
- **Путь**: `/update_cards_in_hand.php`
- **Метод**: `GET`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.

### 32. **update_character.php**
- **Описание**: Обновляет персонажа игрока.
- **Путь**: `/update_character.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `character` (string): Имя персонажа.

### 33. **update_current_timee.php**
- **Описание**: Обновляет текущее время в игровой комнате и отправляет уведомление через WebSocket.
- **Путь**: `/update_current_timee.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.
  - `new_time` (int): Новое значение времени.

### 34. **update_player_lives.php**
- **Описание**: Обновляет количество жизней у игрока.
- **Путь**: `/update_player_lives.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `id_player` (int): Идентификатор игрока.
  - `lives` (int): Новое количество жизней.

### 35. **update_player_tokens.php**
- **Описание**: Обновляет количество токенов у игрока.
- **Путь**: `/update_player_tokens.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `id_player` (int): Идентификатор игрока.
  - `tokens` (int): Новое количество токенов.

### 36. **update_ready_status.php**
- **Описание**: Обновляет статус готовности игрока.
- **Путь**: `/update_ready_status.php`
- **Метод**: `POST`
- **Входные параметры**:
  - `room_id` (int): Идентификатор игровой комнаты.
  - `login` (string): Логин игрока.
  - `ready_status` (bool): Статус готовности.

### 37. **wait.html**
- **Описание**: HTML-страница ожидания начала игры.
- **Путь**: `/wait.html`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 38. **wait.js**
- **Описание**: JavaScript-файл для управления страницей ожидания.
- **Путь**: `/js/wait.js`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 39. **logreg.js**
- **Описание**: JavaScript-файл для обработки форм входа и регистрации.
- **Путь**: `/js/logreg.js`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 40. **js.js**
- **Описание**: JavaScript-файл для управления выбором персонажа и созданием комнаты.
- **Путь**: `/js/js.js`
- **Метод**: `GET`
- **Входные параметры**: Нет

### 41. **game.js**
- **Описание**: JavaScript-файл для управления игровым процессом.
- **Путь**: `/js/game.js`
- **Метод**: `GET`
- **Входные параметры**: Нет

## Лицензия

Этот проект лицензирован под лицензией MIT. Подробности смотрите в файле [LICENSE](LICENSE).

## Контакты

Если у вас есть вопросы или предложения, пожалуйста, свяжитесь с нами:

- **Email**: munichka710@gmail.com
- **GitHub Issues**: [Открыть issue](https://github.com/ваш-пользователь/эпичные-схватки-боевых-магов/issues)

## Благодарности

Спасибо всем, кто внес свой вклад в этот проект!
